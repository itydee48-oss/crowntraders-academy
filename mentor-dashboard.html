<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Mentor Dashboard</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <style>
    body {
      margin: 0;
      font-family: 'Poppins', sans-serif;
      background: #f5f7fa;
      color: #333;
    }
    .sidebar {
      width: 260px;
      height: 100vh;
      background: #0f172a;
      padding: 20px;
      color: white;
      position: fixed;
      display: flex;
      flex-direction: column;
      gap: 20px;
    }
    .sidebar h2 {
      margin: 0;
      font-size: 22px;
      font-weight: 600;
    }
    .sidebar button {
      width: 100%;
      padding: 12px;
      border: none;
      background: #1e293b;
      color: white;
      border-radius: 10px;
      font-size: 15px;
      cursor: pointer;
      transition: 0.3s;
    }
    .sidebar button:hover {
      background: #334155;
    }

    .content {
      margin-left: 260px;
      padding: 30px;
    }

    .card {
      background: white;
      padding: 20px;
      border-radius: 20px;
      box-shadow: 0 6px 20px rgba(0,0,0,0.05);
      margin-bottom: 25px;
    }

    .clients-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
      gap: 20px;
    }

    .client-card {
      background: #ffffff;
      border-radius: 18px;
      padding: 18px;
      box-shadow: 0 4px 14px rgba(0,0,0,0.08);
      transition: 0.25s;
    }
    .client-card:hover {
      transform: translateY(-3px);
    }

    .chat-box {
      display: none;
      position: fixed;
      bottom: 20px;
      right: 20px;
      width: 350px;
      height: 480px;
      background: white;
      border-radius: 18px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.12);
      display: flex;
      flex-direction: column;
    }
    .chat-header {
      background: #0f172a;
      color: white;
      padding: 14px;
      font-size: 17px;
      border-radius: 18px 18px 0 0;
      text-align: center;
    }
    .chat-messages {
      flex: 1;
      overflow-y: auto;
      padding: 15px;
    }
    .chat-input {
      padding: 12px;
      border-top: 1px solid #ddd;
      display: flex;
      gap: 10px;
    }
    .chat-input input {
      flex: 1;
      padding: 10px;
      border-radius: 8px;
      border: 1px solid #ccc;
    }
    .chat-input button {
      background: #0f172a;
      color: white;
      border: none;
      padding: 10px 14px;
      border-radius: 8px;
      cursor: pointer;
    }

    .floating-chat-btn {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: #0f172a;
      color: white;
      padding: 15px 20px;
      border-radius: 50%;
      font-size: 20px;
      cursor: pointer;
      box-shadow: 0 6px 20px rgba(0,0,0,0.15);
    }

  </style>
</head>
<body>

<div class="sidebar">
  <h2>Mentor Panel</h2>
  <button onclick="showSection('clients')">Approved Clients</button>
  <button onclick="showSection('tasks')">Tasks</button>
  <button onclick="showSection('resources')">Resources</button>
</div>

<div class="content" id="main-content">
  <div id="clients-section" class="card">
    <h2>Approved Clients</h2>
    <div class="clients-grid" id="clients-list"></div>
  </div>

  <div id="tasks-section" class="card" style="display:none;">
    <h2>Tasks</h2>
    <p>Mentor tasks will load here.</p>
  </div>

  <div id="resources-section" class="card" style="display:none;">
    <h2>Resources</h2>
    <p>Your learning resources will appear here.</p>
  </div>
</div>

<div class="floating-chat-btn" onclick="toggleChat()">ðŸ’¬</div>

<div class="chat-box" id="chat-box">
  <div class="chat-header">Community Chat</div>
  <div class="chat-messages" id="chat-messages"></div>
  <div class="chat-input">
    <input id="chat-text" placeholder="Type message..." />
    <button onclick="sendMessage()">Send</button>
  </div>
</div>

<script>
  const supabase = supabase.createClient("https://omrsywvfdhzeokmfdrfh.supabase.co", "YOUR_PUBLIC_ANON_KEY");

  async function loadClients() {
    let { data, error } = await supabase.from('clients').select('*').eq('status', 'approved');
    const container = document.getElementById('clients-list');
    container.innerHTML = '';

    if (error) {
      container.innerHTML = '<p>Error loading clients.</p>';
      return;
    }

    data.forEach(c => {
      container.innerHTML += `
        <div class="client-card">
          <h3>${c.full_name}</h3>
          <p>Email: ${c.email}</p>
        </div>
      `;
    });
  }

  function showSection(section) {
    document.getElementById('clients-section').style.display = 'none';
    document.getElementById('tasks-section').style.display = 'none';
    document.getElementById('resources-section').style.display = 'none';

    document.getElementById(section + '-section').style.display = 'block';
  }

  function toggleChat() {
    const box = document.getElementById('chat-box');
    box.style.display = box.style.display === 'flex' ? 'none' : 'flex';
  }

  async function loadChat() {
    let { data } = await supabase.from('community_chat').select('*').order('created_at', { ascending: true });
    const chat = document.getElementById('chat-messages');
    chat.innerHTML = '';

    data?.forEach(m => {
      chat.innerHTML += `<p><strong>${m.sender}</strong>: ${m.message}</p>`;
    });

    chat.scrollTop = chat.scrollHeight;
  }

  async function sendMessage() {
    const text = document.getElementById('chat-text').value;
    if (!text.trim()) return;

    await supabase.from('community_chat').insert({ sender: 'Mentor', message: text });
    document.getElementById('chat-text').value = '';
    loadChat();
  }

  setInterval(loadChat, 5000);
  loadClients();
</script>

</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mentor Dashboard</title>
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="bg-gray-100 min-h-screen font-sans">
    <div class="flex">
        <aside class="w-64 bg-white shadow-lg min-h-screen p-6">
            <h2 class="text-2xl font-bold text-gray-800 mb-6">Mentor Panel</h2>
            <nav class="space-y-4">
                <button class="w-full text-left text-gray-700 hover:text-blue-600 font-medium">Dashboard</button>
                <button class="w-full text-left text-gray-700 hover:text-blue-600 font-medium">Approved Clients</button>
                <button class="w-full text-left text-gray-700 hover:text-blue-600 font-medium">Community Chat</button>
                <button class="w-full text-left text-gray-700 hover:text-blue-600 font-medium">Tasks</button>
                <button class="w-full text-left text-gray-700 hover:text-blue-600 font-medium">Resources</button>
            </nav>
        </aside>

        <main class="flex-1 p-10">
            <h1 class="text-3xl font-bold text-gray-900 mb-8">Welcome, Mentor</h1>

            <!-- Clients Section -->
            <section id="clientsSection" class="mb-12">
                <h2 class="text-xl font-semibold mb-4">Your Approved Clients</h2>
                <div id="clientsList" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
            </section>

            <!-- Chat Section -->
            <section id="chatSection" class="mb-12">
                <h2 class="text-xl font-semibold mb-4">Community Chat</h2>
                <div class="bg-white shadow-md rounded-lg p-6 h-96 overflow-y-auto" id="chatMessages"></div>

                <div class="mt-4 flex gap-3">
                    <input id="chatInput" class="flex-1 p-3 border rounded-lg" placeholder="Type a message..." />
                    <button id="sendBtn" class="px-5 py-3 bg-blue-600 text-white rounded-lg">Send</button>
                </div>
            </section>

        </main>
    </div>

<script>
    const SUPABASE_URL = "https://omrsywvfdhzeokmfdrfh.supabase.co";
    const SUPABASE_KEY = "YOUR_PUBLIC_ANON_KEY";
    const supabase = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

    async function loadClients() {
        const { data, error } = await supabase
            .from('clients')
            .select('*')
            .eq('status', 'approved');

        if (error) {
            console.error(error);
            return;
        }

        const container = document.getElementById('clientsList');
        container.innerHTML = '';

        data.forEach(client => {
            const card = document.createElement('div');
            card.className = "bg-white shadow-md p-6 rounded-lg";
            card.innerHTML = `
                <h3 class="text-lg font-bold text-gray-800">${client.name}</h3>
                <p class="text-gray-600">${client.email}</p>
            `;
            container.appendChild(card);
        });
    }

    async function loadChat() {
        const { data, error } = await supabase
            .from('community_chat')
            .select('*')
            .order('created_at', { ascending: true });

        if (error) return;

        const chatBox = document.getElementById('chatMessages');
        chatBox.innerHTML = '';

        data.forEach(msg => {
            const bubble = document.createElement('div');
            bubble.className = "mb-4";
            bubble.innerHTML = `
                <p class="text-gray-800 font-semibold">${msg.sender}</p>
                <p class="text-gray-700 bg-gray-200 p-3 rounded-lg inline-block">${msg.message}</p>
            `;
            chatBox.appendChild(bubble);
        });
    }

    document.getElementById('sendBtn').addEventListener('click', async () => {
        const message = document.getElementById('chatInput').value.trim();
        if (!message) return;

        await supabase.from('community_chat').insert([
            { sender: 'Mentor', message }
        ]);

        document.getElementById('chatInput').value = '';
        loadChat();
    });

    loadClients();
    loadChat();
</script>
</body>
</html>
