<!-- dashboard.html -->
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>CrownTradeAcademy — Dashboard</title>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600;700&family=Cormorant+Garamond:wght@500;600&display=swap" rel="stylesheet">
<style>
  :root{
    --bg:#0b0b0c;
    --panel:#0f1113;
    --muted:#9a8f82;
    --gold:#c8a97e;
    --gold-weak:#b89463;
    --accent: rgba(200,169,126,0.12);
    --glass: rgba(255,255,255,0.02);
    --transition: 260ms cubic-bezier(.2,.9,.3,1);
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;font-family:Montserrat,system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue";background:linear-gradient(180deg,#070708 0%,#0b0b0c 60%);color:#e9e6e1}
  a{color:inherit}
  /* Layout */
  .wrap{display:grid;grid-template-columns:260px 1fr;min-height:100vh;gap:28px;padding:28px}
  /* Sidebar */
  .sidebar{background:linear-gradient(180deg,rgba(255,255,255,0.01),transparent);border:1px solid rgba(255,255,255,0.03);padding:20px;border-radius:12px;backdrop-filter: blur(6px)}
  .brand{display:flex;gap:12px;align-items:center;margin-bottom:18px}
  .brand .logo{font-family:'Cormorant Garamond',serif;color:var(--gold);font-size:20px;letter-spacing:1px}
  .nav{margin-top:8px;display:flex;flex-direction:column;gap:8px}
  .nav button{display:flex;align-items:center;gap:12px;padding:10px 12px;border-radius:8px;background:transparent;border:1px solid transparent;color:var(--muted);cursor:pointer;transition:var(--transition);font-weight:600}
  .nav button:hover{background:var(--accent);color:var(--gold);border-color:rgba(200,169,126,0.12)}
  .nav button.active{background:linear-gradient(90deg,rgba(200,169,126,0.08),transparent);color:var(--gold);border-left:3px solid var(--gold)}
  .small{font-size:12px;color:var(--muted)}
  /* Main content */
  .main{display:flex;flex-direction:column;gap:22px}
  .topbar{display:flex;justify-content:space-between;align-items:center;gap:16px}
  .welcome{background:linear-gradient(90deg, rgba(200,169,126,0.06), transparent);padding:18px;border-radius:12px;border:1px solid rgba(255,255,255,0.03);display:flex;align-items:center;justify-content:space-between}
  .welcome-left h1{margin:0;font-family:'Cormorant Garamond',serif;font-size:24px;color:#fff}
  .welcome-left p{margin:6px 0 0;color:var(--muted)}
  .welcome-right{display:flex;gap:12px;align-items:center}
  .stat{background:var(--panel);padding:10px 14px;border-radius:10px;border:1px solid rgba(255,255,255,0.02);text-align:center;min-width:110px}
  .stat .num{font-weight:700;color:var(--gold);font-size:18px}
  .grid{display:grid;grid-template-columns:1fr 420px;gap:22px;align-items:start}
  /* Cards */
  .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent);border:1px solid rgba(255,255,255,0.03);padding:18px;border-radius:12px;box-shadow:0 6px 20px rgba(0,0,0,0.6)}
  .card h3{margin:0 0 10px;font-size:18px;color:#fff}
  .mentor{display:flex;gap:12px;align-items:center}
  .avatar{width:72px;height:72px;border-radius:12px;background:linear-gradient(135deg,var(--gold),var(--gold-weak));display:flex;align-items:center;justify-content:center;font-weight:700;color:#0b0b0c;font-size:18px}
  .mentor-info p{margin:0;color:var(--muted)}
  .button{background:linear-gradient(90deg,var(--gold),var(--gold-weak));border:none;padding:10px 14px;border-radius:8px;color:#0b0b0c;font-weight:700;cursor:pointer;transition:var(--transition)}
  .button:hover{transform:translateY(-2px);box-shadow:0 10px 30px rgba(200,169,126,0.12)}
  /* Lessons preview */
  .lessons-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}
  .lesson-card{display:flex;gap:12px;align-items:center;padding:10px;border-radius:8px;background:linear-gradient(180deg,rgba(255,255,255,0.01),transparent);border:1px solid rgba(255,255,255,0.02)}
  .thumb{width:84px;height:56px;border-radius:6px;background:linear-gradient(135deg,var(--gold-weak),#8b6a3e);display:flex;align-items:center;justify-content:center;color:#0b0b0b;font-weight:700}
  .lesson-meta h4{margin:0 0 6px;font-size:15px}
  .progress{height:8px;background:rgba(255,255,255,0.03);border-radius:6px;overflow:hidden}
  .progress > span{display:block;height:100%;background:linear-gradient(90deg,var(--gold),var(--gold-weak));width:0;transition:width 900ms cubic-bezier(.2,.9,.3,1)}
  /* Quick actions */
  .quick-actions{display:flex;gap:10px;flex-wrap:wrap}
  .ghost{background:transparent;border:1px solid rgba(255,255,255,0.04);padding:8px 10px;border-radius:8px;color:var(--muted);cursor:pointer}
  /* small footer */
  .small-footer{font-size:13px;color:var(--muted);text-align:center;margin-top:18px}
  /* responsive */
  @media (max-width:980px){
    .wrap{grid-template-columns:1fr; padding:16px}
    .grid{grid-template-columns:1fr}
    .lessons-grid{grid-template-columns:1fr}
    .sidebar{order:2}
  }
  /* subtle entrance animations */
  .fadeIn{opacity:0;transform:translateY(8px);animation:fadeIn 600ms forwards}
  @keyframes fadeIn{to{opacity:1;transform:none}}
</style>
</head>
<body>
<div class="wrap">
  <!-- SIDEBAR -->
  <aside class="sidebar fadeIn" aria-label="Navigation">
    <div class="brand"><div class="logo">CrownTradeAcademy</div></div>
    <nav class="nav" role="navigation" aria-label="Main">
      <button class="active" data-route="dashboard">Dashboard</button>
      <button data-route="lessons" onclick="location.href='lessons.html'">Lessons</button>
      <button data-route="livechart" onclick="location.href='live-chart.html'">Live Chart</button>
      <button data-route="chat" onclick="location.href='chat.html'">Chat Mentor</button>
      <button data-route="logout" onclick="logout()">Logout</button>
    </nav>
    <div style="height:14px"></div>
    <div class="small">Account</div>
    <div style="margin-top:8px" class="small">Status: <strong style="color:var(--gold);">Pending</strong></div>
  </aside>

  <!-- MAIN -->
  <main class="main">
    <div class="topbar fadeIn">
      <div class="welcome">
        <div class="welcome-left">
          <h1 id="welcomeTitle">Welcome back, Trader</h1>
          <p class="small">Ready to sharpen your edge today?</p>
        </div>
      </div>
      <div style="display:flex;gap:12px;align-items:center">
        <div class="stat"><div class="num" id="lessonsCompleted">3/12</div><div class="small">Lessons</div></div>
        <div class="stat"><div class="num" id="sessionsBooked">0</div><div class="small">Sessions</div></div>
        <div class="stat"><div class="num" id="roi">—</div><div class="small">Perf</div></div>
      </div>
    </div>

    <div class="grid fadeIn" style="animation-delay:120ms">
      <!-- LEFT: Overview -->
      <section>
        <div class="card">
          <h3>Program Overview</h3>
          <div style="display:flex;justify-content:space-between;gap:18px;align-items:center">
            <div>
              <p class="small">Mentor</p>
              <div class="mentor" style="margin-top:8px">
                <div class="avatar" id="mentorAvatar">MK</div>
                <div class="mentor-info">
                  <div style="font-weight:700" id="mentorName">Mentor K</div>
                  <p class="small" id="mentorRole">Price Action & Psychology</p>
                  <div style="margin-top:8px">
                    <button class="button" onclick="location.href='chat.html'">Message Mentor</button>
                    <button class="ghost" onclick="location.href='lessons.html'">View Lessons</button>
                  </div>
                </div>
              </div>
            </div>
            <div style="min-width:180px">
              <p class="small">Progress</p>
              <div style="height:10px;background:rgba(255,255,255,0.03);border-radius:8px;overflow:hidden;margin-top:8px">
                <div style="height:100%;width:25%;background:linear-gradient(90deg,var(--gold),var(--gold-weak));"></div>
              </div>
              <p class="small" style="margin-top:8px;color:var(--muted)">25% complete</p>
            </div>
          </div>
        </div>

        <div class="card" style="margin-top:14px">
          <h3>Lessons Preview</h3>
          <div class="lessons-grid" id="lessonsPreview">
            <!-- JS will populate lesson cards -->
          </div>
          <div style="margin-top:12px" class="quick-actions">
            <button class="button" onclick="location.href='lessons.html'">Open All Lessons</button>
            <button class="ghost" onclick="location.href='live-chart.html'">Open Live Chart</button>
          </div>
        </div>
      </section>

      <!-- RIGHT: Notifications & Quick Info -->
      <aside>
        <div class="card">
          <h3>Notifications</h3>
          <p class="small" id="note1">No urgent notifications.</p>
        </div>

        <div class="card" style="margin-top:12px">
          <h3>Quick Stats</h3>
          <p class="small">Avg Win Rate: <strong style="color:var(--gold)">—</strong></p>
          <p class="small">Risk Per Trade: <strong>1%</strong></p>
          <p class="small">Community Rank: <strong style="color:var(--gold)">Bronze</strong></p>
        </div>

        <div class="card" style="margin-top:12px">
          <h3>Resources</h3>
          <p class="small"><a href="#" style="color:var(--gold)">Trading Setup Guide</a></p>
          <p class="small"><a href="#" style="color:var(--gold)">Order Block Cheatsheet</a></p>
        </div>
      </aside>
    </div>

    <div class="small-footer">Tip: Open the Live Chart to analyze setups before your next session.</div>

  </main>
</div>

<script>
  // Demo data - later replace with Supabase fetch
  const demoUser = { name: 'Deelan', mentor: { name: 'M. Karanja', initials: 'MK', role:'Price Action & Psychology' }, lessons:[
    {id:1,title:'CRT Foundations',progress:40},
    {id:2,title:'Liquidity Traps',progress:20},
    {id:3,title:'FVG & Order Blocks',progress:0},
    {id:4,title:'Scalp Setups',progress:60}
  ]};

  // Init UI
  document.getElementById('welcomeTitle').textContent = `Welcome back, ${demoUser.name}`;
  document.getElementById('mentorName').textContent = demoUser.mentor.name;
  document.getElementById('mentorRole').textContent = demoUser.mentor.role;
  document.getElementById('mentorAvatar').textContent = demoUser.mentor.initials;

  // populate lessons preview
  const preview = document.getElementById('lessonsPreview');
  demoUser.lessons.slice(0,4).forEach(l=>{
    const card = document.createElement('div');
    card.className='lesson-card';
    card.innerHTML = `
      <div class="thumb">${l.title.split(' ')[0].slice(0,3).toUpperCase()}</div>
      <div class="lesson-meta">
        <h4>${l.title}</h4>
        <div class="progress" aria-hidden="true"><span style="width:${l.progress}%"></span></div>
        <div style="margin-top:6px" class="small">${l.progress}% complete</div>
      </div>
    `;
    preview.appendChild(card);
  });

  // small animation reveal
  document.querySelectorAll('.fadeIn').forEach((el,i)=>el.style.animationDelay=(i*80)+'ms');

  // logout placeholder
  function logout(){
    // TODO: supabase.auth.signOut() or other logic
    window.location.href='index.html';
  }

  // Accessibility: keyboard support for sidebar focus
  document.querySelectorAll('.nav button').forEach(btn=>{
    btn.addEventListener('keydown', e=>{
      if(e.key==='Enter'){ btn.click(); }
    })
  });
</script>
</body>
</html>
